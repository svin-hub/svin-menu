<!DOCTYPE html> <html lang="ru" data-theme="dark"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>Недельный план - Высокий белок - Подробные рецепты - Тёмная тема</title> <style> :root{ --bg:#0b0f14; --ink:#e5e7eb; --muted:#9aa3af; --accent:#60a5fa; --soft:#121822; --line:#1f2937; --success:#34d399; --warn:#f59e0b; --danger:#ef4444; --table-head:#0f1622; --chip:#152032; --tap:44px; } [data-theme="light"]{ --bg:#ffffff;--ink:#1a1a1a;--muted:#6b7280;--accent:#2563eb;--soft:#f3f4f6;--line:#e5e7eb;--success:#10b981;--warn:#b45309;--danger:#b91c1c;--table-head:#fafafa;--chip:#eef2ff;--tap:44px; } *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans','Helvetica Neue',Arial} body{padding:24px;line-height:1.5} header{display:flex;justify-content:space-between;align-items:flex-start;gap:16px;margin-bottom:16px} .title{max-width:70%} h1{font-size:22px;margin:0 0 6px 0} .subtitle{color:var(--muted);font-size:13px;margin-bottom:4px} .badge{display:inline-block;background:var(--chip);border:1px solid var(--line);border-radius:6px;padding:2px 8px;font-size:12px;margin-right:6px;white-space:nowrap} hr{border:none;border-top:1px solid var(--line);margin:16px 0} section{margin:16px 0} h2{font-size:18px;margin:0 0 10px 0} h3{font-size:16px;margin:14px 0 8px 0} h4{font-size:14px;margin:12px 0 6px 0} p{margin:8px 0} .note{font-size:12px;color:var(--muted)} .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px} .card{border:1px solid var(--line);border-radius:8px;padding:12px;background:var(--soft)} .soft{background:rgba(255,255,255,0.02)} .tbl{width:100%;border-collapse:collapse;font-size:13px;display:table} .tbl th,.tbl td{border:1px solid var(--line);padding:8px;vertical-align:top} .tbl th{background:var(--table-head);text-align:left} .right{text-align:right} .checkbox,.shop-checkbox{ width:20px;height:20px;border:1.5px solid var(--line); display:inline-flex;align-items:center;justify-content:center; border-radius:4px;margin-right:10px;cursor:pointer;flex:0 0 auto; } .checkbox.checked,.shop-checkbox.checked{ background:linear-gradient(135deg,var(--accent),#22d3ee);border-color:transparent; } .ing-item{display:flex;align-items:flex-start;gap:10px;padding:6px 0} .ing-text{flex:1 1 auto} .ing-price{min-width:90px;text-align:right;opacity:.9} .ing-price small{opacity:.7} .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#0a0f18;border:1px solid var(--line);padding:2px 6px;border-radius:6px;font-size:12px;color:var(--muted)} .print-hint{font-size:12px;color:var(--muted)} .spaced li{margin:4px 0} ul{padding-left:18px;margin:8px 0} button, input, textarea{font-size:16px} details > summary{cursor:pointer;list-style:none} details > summary::-webkit-details-marker{display:none} @media (max-width: 900px){ .grid-2{grid-template-columns:1fr} .tbl{display:block;overflow:auto;-webkit-overflow-scrolling:touch} .tbl th, .tbl td{white-space:nowrap} header{flex-direction:column} } @media (max-width: 480px){ body{padding:14px} h1{font-size:20px} h2{font-size:17px} h3{font-size:15px} .btns{position:sticky;top:0;z-index:10;background:var(--bg);padding:8px 0} } @page{size:A4;margin:12mm} @media print { body{padding:0} header{margin:0 0 8px 0} .print-hint,.btns{display:none !important} a{color:black;text-decoration:none} footer{position:fixed;bottom:6mm;left:0;right:0;text-align:center;color:#6b7280} .page-number:after{content:counter(page) " / " counter(pages)} } .step{margin:6px 0} .step b{display:inline-block;min-width:22px} .block{margin:10px 0 12px 0} </style> </head> <body> <header> <div class="title"> <h1>Недельный план с высоким белком</h1> <div class="subtitle">Меню: 7 дней × завтрак (без омлетов/блинчиков; каши с ягодами/фруктами/орехами, яйца допускаются) + 2 горячих (всегда мясо/рыба) + салат - Для двоих</div> <div> <span class="badge">Говядина — приоритет</span> <span class="badge">Кур. бедро, индейка, свинина, кур. грудка — по необходимости</span> <span class="badge">Рыба: пан‑соус, эскабече, путтанеска</span> </div> </div> <div> <div class="print-hint"> Сохранить в PDF: <span class="kbd">Печать</span> → <span class="kbd">Сохранить как PDF</span> → Поля «узкие», включить фоновые элементы. </div> <div class="btns" style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap"> <button type="button" id="toggleTheme">Переключить тему</button> <button type="button" id="expandAll">Развернуть рецепты</button> <button type="button" id="collapseAll">Свернуть рецепты</button> <button type="button" id="clearAll">Сбросить все</button> </div> </div> </header> <hr /> <section id="menu"> <h2>Часть 1. Меню и подробные рецепты</h2> <div class="note">Порции на двоих. Духовка без конвекции. Огонь: сильный=8–9/10, средний=5–6/10, низкий=2–3/10.</div> <!-- Ниже для примера показаны два блюда с чекбоксами ингредиентов. По аналогии размечайте остальные блюда (или скажите — подготовлю полный патч на весь раздел). --> <details class="card" open> <summary><strong>День 5 — Рыба в соусе путтанеска (сковорода) + булгур/спагетти</strong></summary> <div class="block"> <h4>Ингредиенты</h4> <div class="ing-item" data-ing="fish_fillet"><span class="checkbox"></span><div class="ing-text">Филе белой рыбы 2×180–200 г (треска/хек)</div><div class="ing-price" data-est="fish_white_2x180">~260 ₽ <small>/пачка</small></div></div> <div class="ing-item" data-ing="garlic"><span class="checkbox"></span><div class="ing-text">Чеснок 2 зубчика</div><div class="ing-price" data-est="garlic">~5 ₽</div></div> <div class="ing-item" data-ing="anchovy"><span class="checkbox"></span><div class="ing-text">Анчоусы 2–3 филе (опционально)</div><div class="ing-price" data-est="anchovy">~220 ₽ <small>/банка</small></div></div> <div class="ing-item" data-ing="chili"><span class="checkbox"></span><div class="ing-text">Хлопья чили — по вкусу</div><div class="ing-price" data-est="chili">~10 ₽ <small>/порция</small></div></div> <div class="ing-item" data-ing="tomatoes_can"><span class="checkbox"></span><div class="ing-text">Томаты в собственном соку 1 банка</div><div class="ing-price" data-est="tomatoes_can">~130 ₽</div></div> <div class="ing-item" data-ing="olives"><span class="checkbox"></span><div class="ing-text">Оливки/маслины без косточек 60–80 г</div><div class="ing-price" data-est="olives">~120 ₽ <small>/банка</small></div></div> <div class="ing-item" data-ing="capers"><span class="checkbox"></span><div class="ing-text">Каперсы 1,5 ст. л.</div><div class="ing-price" data-est="capers">~180 ₽ <small>/банка</small></div></div> <div class="ing-item" data-ing="lemon"><span class="checkbox"></span><div class="ing-text">Лимон — 1 ч. л. сока</div><div class="ing-price" data-est="lemon">~8 ₽ <small>/порция</small></div></div> <div class="ing-item" data-ing="bulgur_spaghetti"><span class="checkbox"></span><div class="ing-text">Булгур 160–180 г или спагетти 220–250 г</div><div class="ing-price" data-est="pasta_0_5kg">~70 ₽ <small>/0,5 кг</small></div></div> </div> <div class="block"> <h4>Шаги (20–25 мин)</h4> <div class="step"><b>1.</b> Рыбу обсушить, посолить/перчить. Разогреть сковороду, 1 ст. л. масла, жарить 2,5–3 мин/сторона до полуготовности. Снять.</div> <div class="step"><b>2.</b> В сковороду: 0,5 ст. л. масла, чеснок 30 с, анчоусы размять до растворения, щепотка чили.</div> <div class="step"><b>3.</b> Влить томаты, добавить оливки и каперсы, уварить 5–6 мин до густоты.</div> <div class="step"><b>4.</b> Вернуть рыбу в соус, 2–4 мин до готовности (внутр. t ~ 50–52°C), сбалансировать 1 ч. л. сока лимона, соль по вкусу.</div> <div class="step"><b>5.</b> Булгур 1:2 — 10–12 мин или спагетти al dente; можно добавить 2–3 ст. л. воды от пасты в соус для эмульсии.</div> </div> </details> <details class="card"> <summary><strong>День 6 — Чечевица пряная с говядиной (рагу) + йогурт</strong></summary> <div class="block"> <h4>Ингредиенты</h4> <div class="ing-item" data-ing="beef_stew"><span class="checkbox"></span><div class="ing-text">Говядина для тушения 400 г (кубики)</div><div class="ing-price" data-est="beef_stew_1kg">~600 ₽ <small>/кг</small></div></div> <div class="ing-item" data-ing="lentils"><span class="checkbox"></span><div class="ing-text">Чечевица зелёная/коричневая 200 г</div><div class="ing-price">~80 ₽ <small>/200 г</small></div></div> <div class="ing-item" data-ing="onion"><span class="checkbox"></span><div class="ing-text">Лук 1 шт</div><div class="ing-price" data-est="onion_1kg">~40 ₽ <small>/кг</small></div></div> <div class="ing-item" data-ing="carrot"><span class="checkbox"></span><div class="ing-text">Морковь 1 шт</div><div class="ing-price" data-est="carrot_1kg">~40 ₽ <small>/кг</small></div></div> <div class="ing-item" data-ing="tomatoes_can"><span class="checkbox"></span><div class="ing-text">Томаты в собственном соку 1 банка</div><div class="ing-price" data-est="tomatoes_can">~130 ₽</div></div> <div class="ing-item" data-ing="broth"><span class="checkbox"></span><div class="ing-text">Бульон/вода 400–500 мл</div><div class="ing-price">—</div></div> <div class="ing-item" data-ing="spices"><span class="checkbox"></span><div class="ing-text">Зира 1 ч. л., кориандр 1 ч. л., паприка 1 ч. л.</div><div class="ing-price">~10–20 ₽ <small>/порция</small></div></div> <div class="ing-item" data-ing="yogurt"><span class="checkbox"></span><div class="ing-text">Йогурт натуральный для подачи</div><div class="ing-price" data-est="yogurt_700g">~400 ₽ <small>/700 г</small></div></div> </div> <div class="block"> <h4>Шаги (45–60 мин)</h4> <div class="step"><b>1.</b> Обсушить говядину, обжарить партиями 6–8 мин до румяности. Посолить в конце.</div> <div class="step"><b>2.</b> Лук+морковь 5 мин; специи 1 мин.</div> <div class="step"><b>3.</b> Промытую чечевицу, томаты, бульон/воду; томить 35–45 мин до мягкости; соль/перец.</div> <div class="step"><b>4.</b> Подача: йогурт и зелень.</div> </div> </details> <!-- … По запросу подготовлю полный блок меню с чекбоксами для всех дней … --> </section> <section id="shopping"> <h2>Часть 2. Список покупок (галочки для магазина)</h2> <div class="grid-2"> <div class="card"> <h3>Мясо/рыба</h3> <ul class="spaced"> <li><span class="shop-checkbox"></span>Говядина: фарш ~1,5 кг</li> <li><span class="shop-checkbox"></span>Говядина для тушения 1,0–1,2 кг</li> <li><span class="shop-checkbox"></span>Говядина ломтики (стир‑фрай) 0,4 кг</li> <li><span class="shop-checkbox"></span>Кур. бёдра/индейка 1,2–1,4 кг</li> <li><span class="shop-checkbox"></span>Кур. грудка 0,4 кг</li> <li><span class="shop-checkbox"></span>Свинина 0,8–0,9 кг</li> <li><span class="shop-checkbox"></span>Рыба белая 2 филе; лосось 2 филе</li> <li><span class="shop-checkbox"></span>Оливки/маслины, каперсы, анчоусы</li> </ul> </div> <div class="card"> <h3>Молочное/яйца</h3> <ul class="spaced"> <li><span class="shop-checkbox"></span>Яйца 20–30 шт</li> <li><span class="shop-checkbox"></span>Йогурт 0,7–1 кг; творог 0,8 кг</li> <li><span class="shop-checkbox"></span>Сыр твёрдый ~0,4 кг; молоко 1–2 л</li> </ul> </div> <div class="card"> <h3>Овощи/фрукты/зелень</h3> <ul class="spaced"> <li><span class="shop-checkbox"></span>Лук, морковь, перцы, капуста/айсберг, огурцы, томаты, брокколи, свёкла</li> <li><span class="shop-checkbox"></span>Лимоны/лаймы, зелень (укроп/петрушка/базилик/кинза)</li> <li><span class="shop-checkbox"></span>Ягоды, яблоки/бананы/груши; курага, изюм</li> </ul> </div> <div class="card"> <h3>Бакалея/консервы</h3> <ul class="spaced"> <li><span class="shop-checkbox"></span>Крупы: рис, гречка, овсянка, пшено, булгур/перловка, киноа, полента, спагетти</li> <li><span class="shop-checkbox"></span>Томаты в с/с 5–6 банок; фасоль 2 банки</li> <li><span class="shop-checkbox"></span>Каперсы, оливки/маслины, томатная паста, анчоусы</li> </ul> </div> <div class="card"> <h3>Специи/масла/прочее</h3> <ul class="spaced"> <li><span class="shop-checkbox"></span>Зира, паприка, кориандр, чили; чеснок/имбирь</li> <li><span class="shop-checkbox"></span>Соевый/устриничный соус, уксусы (рисовый/ябл.), мёд/сироп, крахмал</li> <li><span class="shop-checkbox"></span>Оливковое масло; орехи</li> </ul> </div> </div> </section> <section id="budget"> <h2>Часть 3. Смета (вводите свои цены)</h2> <div class="note">В правом столбце — поля ввода. Итоги по категориям и общий итог считаются автоматически и сохраняются в браузере.</div> <div class="card"> <h3>Мясо/рыба</h3> <table class="tbl" data-table-key="meat"> <thead><tr><th>✓</th><th>Позиция</th><th>Кол-во</th><th class="right">Ориентир</th><th class="right">Мои цены</th></tr></thead> <tbody> <tr><td></td><td>Говядина (фарш)</td><td>~1,5 кг</td><td class="right">650 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-1"/></td></tr> <tr><td></td><td>Говядина (тушение)</td><td>1,0–1,2 кг</td><td class="right">600 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-2"/></td></tr> <tr><td></td><td>Говядина (ломтики)</td><td>0,4 кг</td><td class="right">800–1000 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-3"/></td></tr> <tr><td></td><td>Кур. бёдра/индейка</td><td>1,2–1,4 кг</td><td class="right">380–500 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-4"/></td></tr> <tr><td></td><td>Кур. грудка</td><td>0,4 кг</td><td class="right">450–550 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-5"/></td></tr> <tr><td></td><td>Свинина</td><td>0,8–0,9 кг</td><td class="right">450–550 ₽/кг</td><td class="right"><input class="price" type="number" data-key="meat-6"/></td></tr> <tr><td></td><td>Рыба белая</td><td>2 филе</td><td class="right">~260 ₽/уп.</td><td class="right"><input class="price" type="number" data-key="meat-7"/></td></tr> <tr><td></td><td>Лосось</td><td>2 филе</td><td class="right">~600 ₽/уп.</td><td class="right"><input class="price" type="number" data-key="meat-8"/></td></tr> <tr><td colspan="3" class="total">Итог по категории</td><td class="right total">—</td><td class="right total" data-sum="meat">0</td></tr> </tbody> </table> </div> <div class="card"> <h3>Молочное/яйца</h3> <table class="tbl" data-table-key="dairy"> <thead><tr><th>✓</th><th>Позиция</th><th>Кол-во</th><th class="right">Ориентир</th><th class="right">Мои цены</th></tr></thead> <tbody> <tr><td></td><td>Яйца</td><td>20–30 шт</td><td class="right">~130 ₽/10</td><td class="right"><input class="price" type="number" data-key="dairy-1"/></td></tr> <tr><td></td><td>Йогурт/творог</td><td>1,5–1,8 кг</td><td class="right">~400 ₽/700 г - ~300 ₽/800 г</td><td class="right"><input class="price" type="number" data-key="dairy-2"/></td></tr> <tr><td></td><td>Сыр твёрдый</td><td>0,35–0,4 кг</td><td class="right">~800–1000 ₽/кг</td><td class="right"><input class="price" type="number" data-key="dairy-3"/></td></tr> <tr><td></td><td>Молоко</td><td>1–2 л</td><td class="right">~90 ₽/л</td><td class="right"><input class="price" type="number" data-key="dairy-4"/></td></tr> <tr><td colspan="3" class="total">Итог по категории</td><td class="right total">—</td><td class="right total" data-sum="dairy">0</td></tr> </tbody> </table> </div> <div class="card"> <h3>Овощи/фрукты/зелень</h3> <table class="tbl" data-table-key="veg"> <thead><tr><th>✓</th><th>Позиция</th><th>Кол-во</th><th class="right">Ориентир</th><th class="right">Мои цены</th></tr></thead> <tbody> <tr><td></td><td>Набор овощей</td><td>на неделю</td><td class="right">лук/морковь ~40 ₽/кг; томаты ~180 ₽/кг; перец ~220 ₽/кг</td><td class="right"><input class="price" type="number" data-key="veg-1"/></td></tr> <tr><td></td><td>Цитрусы, зелень</td><td>—</td><td class="right">лимон ~25 ₽/шт; зелень ~50 ₽/пучок</td><td class="right"><input class="price" type="number" data-key="veg-2"/></td></tr> <tr><td></td><td>Фрукты/ягоды/сухофрукты</td><td>—</td><td class="right">ягоды ~250 ₽/400 г; изюм/курага ~120 ₽/200 г</td><td class="right"><input class="price" type="number" data-key="veg-3"/></td></tr> <tr><td colspan="3" class="total">Итог по категории</td><td class="right total">—</td><td class="right total" data-sum="veg">0</td></tr> </tbody> </table> </div> <div class="card"> <h3>Бакалея/консервы</h3> <table class="tbl" data-table-key="groceries"> <thead><tr><th>✓</th><th>Позиция</th><th>Кол-во</th><th class="right">Ориентир</th><th class="right">Мои цены</th></tr></thead> <tbody> <tr><td></td><td>Крупы/паста</td><td>на неделю</td><td class="right">рис ~120 ₽/кг; гречка ~140 ₽/кг; паста ~70 ₽/0,5 кг</td><td class="right"><input class="price" type="number" data-key="gro-1"/></td></tr> <tr><td></td><td>Томаты в с/с, фасоль</td><td>5–6 / 2 банки</td><td class="right">~130 ₽ / ~90 ₽</td><td class="right"><input class="price" type="number" data-key="gro-2"/></td></tr> <tr><td></td><td>Каперсы/оливки/анчоусы/паста томатная</td><td>—</td><td class="right">каперсы ~180; оливки ~120; анчоусы ~220</td><td class="right"><input class="price" type="number" data-key="gro-3"/></td></tr> <tr><td colspan="3" class="total">Итог по категории</td><td class="right total">—</td><td class="right total" data-sum="groceries">0</td></tr> </tbody> </table> </div> <div class="card"> <h3>Специи/масла/прочее</h3> <table class="tbl" data-table-key="spices"> <thead><tr><th>✓</th><th>Позиция</th><th>Кол-во</th><th class="right">Ориентир</th><th class="right">Мои цены</th></tr></thead> <tbody> <tr><td></td><td>Пряности, чеснок/имбирь</td><td>—</td><td class="right">~10–20 ₽/порция</td><td class="right"><input class="price" type="number" data-key="sp-1"/></td></tr> <tr><td></td><td>Соусы, уксусы, мёд/сироп, крахмал</td><td>—</td><td class="right">соевый ~140; уксус ~120; мёд ~120/порция</td><td class="right"><input class="price" type="number" data-key="sp-2"/></td></tr> <tr><td></td><td>Оливковое масло, орехи</td><td>—</td><td class="right">масло — по чеку; орехи ~250/200 г</td><td class="right"><input class="price" type="number" data-key="sp-3"/></td></tr> <tr><td colspan="3" class="total">Итог по категории</td><td class="right total">—</td><td class="right total" data-sum="spices">0</td></tr> </tbody> </table> </div> <div class="card soft"> <strong>Сводный бюджет (по моим ценам): <span id="grandTotal">0</span> ₽</strong> <p class="note">Сохраняется локально (браузер).</p> </div> </section> <section id="notes"> <h2>Примечания и акции</h2> <div class="card"> <textarea id="notesArea" placeholder="Ваши заметки, акции, альтернативы…"></textarea> </div> </section> <footer class="note" style="margin-top:16px;text-align:center"> <span class="page-number"></span> </footer> <script> /* Оценочные цены Москва 2025 (эконом/средний сегмент) */ const PRICE_ESTIMATES = { beef_minced_1kg: 650, beef_stew_1kg: 600, beef_stir_0_4kg: 320, chicken_thigh_1kg: 380, chicken_breast_0_4kg: 180, turkey_1kg: 500, pork_1kg: 480, fish_white_2x180: 260, salmon_2x180: 600, olives: 120, capers: 180, anchovy: 220, tomatoes_can: 130, beans_can: 90, rice_1kg: 120, buckwheat_1kg: 140, oats_0_5kg: 90, millet_0_8kg: 130, bulgur_0_8kg: 140, pearl_0_8kg: 120, quinoa_0_5kg: 250, polenta_0_5kg: 140, pasta_0_5kg: 70, couscous_0_5kg: 90, yogurt_700g: 400, cottage_800g: 300, milk_1l: 90, hard_cheese_0_35kg: 320, eggs_10: 130, nuts_200g: 250, lemon: 25, garlic: 20, onion_1kg: 40, carrot_1kg: 40, potato_2kg: 120, cabbage: 70, cucumbers_1kg: 140, tomatoes_1kg: 180, bellpepper_1kg: 220, broccoli: 150, greens_bundle: 50 }; </script> <script> (function(){ const LS_KEY = 'svin_menu_v1'; const data = JSON.parse(localStorage.getItem(LS_KEY) || '{}'); function save(){ localStorage.setItem(LS_KEY, JSON.stringify(data)); } // Тема if(data.theme){ document.documentElement.setAttribute('data-theme', data.theme); } document.getElementById('toggleTheme')?.addEventListener('click', ()=>{ const cur = document.documentElement.getAttribute('data-theme') || 'dark'; const next = cur==='dark' ? 'light' : 'dark'; document.documentElement.setAttribute('data-theme', next); data.theme = next; save(); }); // Развернуть/свернуть document.getElementById('expandAll')?.addEventListener('click', ()=>document.querySelectorAll('details.card').forEach(d=>d.open=true)); document.getElementById('collapseAll')?.addEventListener('click', ()=>document.querySelectorAll('details.card').forEach(d=>d.open=false)); // Галочки — список покупок document.querySelectorAll('.shop-checkbox').forEach((el, idx)=>{ const key = 'shop-' + idx; if(data[key]) el.classList.add('checked'); el.addEventListener('click', ()=>{ el.classList.toggle('checked'); data[key] = el.classList.contains('checked'); save(); }); }); // Галочки — ингредиенты (по data-ing) document.querySelectorAll('.ing-item').forEach((row, idx)=>{ const key = 'ing-' + (row.getAttribute('data-ing') || ('auto-'+idx)); const box = row.querySelector('.checkbox'); if(!box) return; if(data[key]) box.classList.add('checked'); box.addEventListener('click', ()=>{ box.classList.toggle('checked'); data[key] = box.classList.contains('checked'); save(); }); }); // Подстановка ориентиров цен (по data-est) document.querySelectorAll('.ing-price').forEach(node=>{ const k = node.getAttribute('data-est'); if(!k) return; const v = PRICE_ESTIMATES[k]; if(typeof v === 'number' && node.textContent.trim()===''){ node.textContent = '~'+v.toLocaleString('ru-RU')+' ₽'; } }); // Смета — суммы по таблицам function parseVal(v){ const n = parseFloat(v); return Number.isFinite(n) ? n : 0; } function sumTable(table){ const sumEl = table.querySelector('[data-sum]'); const inputs = table.querySelectorAll('input.price'); let s = 0; inputs.forEach(inp=>s += parseVal(inp.value)); if(sumEl) sumEl.textContent = s.toLocaleString('ru-RU'); return s; } function sumAll(){ let total = 0; document.querySelectorAll('table.tbl').forEach(tbl=> total += sumTable(tbl)); const g = document.getElementById('grandTotal'); if(g) g.textContent = total.toLocaleString('ru-RU'); } document.querySelectorAll('input.price').forEach(inp=>{ const k = inp.dataset.key; if(k && data[k]!=null){ inp.value = data[k]; } inp.addEventListener('input', ()=>{ data[inp.dataset.key] = inp.value; save(); sumAll(); }); }); // Заметки const notes = document.getElementById('notesArea'); if(notes && data.notes){ notes.value = data.notes; } notes?.addEventListener('input', ()=>{ data.notes = notes.value; save(); }); // Сброс document.getElementById('clearAll')?.addEventListener('click', ()=>{ if(confirm('Сбросить все локальные данные (галочки, цены, заметки)?')){ localStorage.removeItem(LS_KEY); location.reload(); } }); sumAll(); })(); </script> </body> </html>
